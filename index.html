<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Stranger Things AR Game</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; background: black; color: white; text-align: center; }
  #loadingScreen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
  img { max-width: 90%; height: auto; }
  #progressBar { width: 80%; height: 10px; background: gray; margin-top: 10px; }
  #progress { width: 0; height: 100%; background: red; }
  #startBtn { padding: 10px 20px; font-size: 18px; margin-top: 20px; background: red; border: none; color: white; }
  #callScreen img { max-width: 60%; height: auto; }
  #arrow { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100px; height: 100px; z-index: 10; }
</style>
</head>
<body>
<div id="loadingScreen">
  <img src="assets/img/stranger-things-logo.png" alt="Stranger Things Logo">
  <p>Carregando...</p>
  <div id="progressBar"><div id="progress"></div></div>
</div>
<div id="game" style="display:none;">
  <div id="callScreen">
    <img src="assets/img/dustin.png" alt="Dustin" id="dustinImg">
  </div>
  <audio id="dustinAudio" src="assets/audio/dustin-missao-1.mp3"></audio>
  <img id="arrow" src="assets/img/arrow.svg" style="display:none;">
</div>
<script>
let assetsLoaded = 0;
const totalAssets = 3;
function assetLoaded() {
  assetsLoaded++;
  document.getElementById('progress').style.width = (assetsLoaded / totalAssets) * 100 + '%';
  if (assetsLoaded >= totalAssets) {
    setTimeout(() => {
      document.getElementById('loadingScreen').innerHTML = '<button id="startBtn">Iniciar o Jogo</button>';
      document.getElementById('startBtn').onclick = startGame;
    }, 500);
  }
}
['assets/img/stranger-things-logo.png', 'assets/img/dustin.png', 'assets/audio/dustin-missao-1.mp3'].forEach(src => {
  if (src.endsWith('.mp3')) {
    fetch(src).then(assetLoaded);
  } else {
    const img = new Image();
    img.onload = assetLoaded;
    img.src = src;
  }
});
function startGame() {
  document.getElementById('loadingScreen').style.display = 'none';
  document.getElementById('game').style.display = 'block';
  document.getElementById('dustinImg').onclick = () => {
    const audio = document.getElementById('dustinAudio');
    audio.play();
    audio.onended = () => {
      document.getElementById('arrow').style.display = 'block';
    };
  };
}
</script>
</body>
</html>
